<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html b:version='2' class='v2' expr:dir='data:blog.languageDirection' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<head>
<title><data:blog.pageTitle/></title>
<meta content='width=device-width, initial-scale=1' name='viewport'/>
<!-- Bootstrap CSS -->
<link href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css' rel='stylesheet'/>
<!-- Bootstrap Icons -->
<link href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css' rel='stylesheet'/>
<!-- LazySizes for image lazy loading -->
<script async='' src='https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js'/>

<!-- Blogger Theme Skin -->
<b:skin><![CDATA[
/*
* Bootstrap Blogger Theme - Spotlight Dark Redesign
* --------------------------------------------------
* @version 2.0
* @author Jules
*/

/* Variable definitions for Theme Designer
----------------------------------------------- */
<Group description="Theme Colors" selector="body">
  <Variable name="body.background.color" description="Background Color" type="color" default="#1a1a1a" value="#1a1a1a"/>
  <Variable name="body.text.color" description="Text Color" type="color" default="#f8f9fa" value="#f8f9fa"/>
  <Variable name="link.color" description="Link Color" type="color" default="#ff4500" value="#ff4500"/>
  <Variable name="header.background.color" description="Header Background Color" type="color" default="#212529" value="#212529"/>
  <Variable name="card.background.color" description="Card Background Color" type="color" default="#212529" value="#212529"/>
  <Variable name="card.border.color" description="Card Border Color" type="color" default="#333" value="#333"/>
</Group>
<Group description="Fonts" selector="body">
    <Variable name="body.font" description="Body Font" type="font" default="normal normal 16px 'Helvetica Neue', Arial, sans-serif" value="normal normal 16px 'Helvetica Neue', Arial, sans-serif"/>
</Group>

/* Base Styles
----------------------------------------------- */
body {
  background-color: $(body.background.color);
  color: $(body.text.color);
  font: $(body.font);
}

a {
  color: $(link.color);
}

header {
  position: relative;
  z-index: 1030;
  background-color: $(header.background.color) !important;
}

.card {
    background-color: $(card.background.color);
    border-color: $(card.border.color);
}

.bg-light {
    background-color: $(header.background.color) !important;
}

.text-muted {
    color: #aaa !important;
}

/* Featured Post Styles
----------------------------------------------- */
.feature-jumbotron {
  background-size: cover;
  background-position: center;
  position: relative;
}
.feature-jumbotron::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0,0,0,0.5);
  border-radius: .25rem; /* Match Bootstrap's rounded class */
}
.feature-jumbotron > * {
  position: relative;
  z-index: 1;
}

/* Sidebar Widget Styles */
.widget {
    margin-bottom: 2rem;
}

.widget-title {
    font-size: 1.25rem;
    margin-bottom: 1rem;
    border-bottom: 2px solid $(link.color);
    padding-bottom: 0.5rem;
}

.widget-content {
    background-color: $(card.background.color);
    padding: 1.5rem;
    border-radius: 0.25rem;
}

/* Shortcode Styles */
/* --- Buttons --- */
.sc-button {
  display: inline-block;
  padding: 10px 20px;
  border-radius: 5px;
  background-color: $(link.color);
  color: #fff !important;
  text-decoration: none;
  font-weight: bold;
  transition: background-color 0.3s;
}
.sc-button:hover {
  background-color: #333;
  color: #fff !important;
}
.sc-button .bi {
  margin-right: 8px;
}

/* --- Alerts --- */
.sc-alert {
  padding: 15px;
  margin-bottom: 20px;
  border: 1px solid transparent;
  border-radius: 4px;
}
.sc-alert-success {
  color: #155724;
  background-color: #d4edda;
  border-color: #c3e6cb;
}
.sc-alert-info {
  color: #0c5460;
  background-color: #d1ecf1;
  border-color: #bee5eb;
}
.sc-alert-warning {
  color: #856404;
  background-color: #fff3cd;
  border-color: #ffeeba;
}
.sc-alert-error {
  color: #721c24;
  background-color: #f8d7da;
  border-color: #f5c6cb;
}

/* Table of Contents Styles */
.toc-container {
  background: #2c2c2c;
  border: 1px solid #444;
  padding: 20px;
  border-radius: 5px;
  margin-bottom: 25px;
}
.toc-container .toc-title {
  font-weight: bold;
  font-size: 1.2em;
  margin-bottom: 10px;
  border-bottom: 1px solid #555;
  padding-bottom: 10px;
}
.toc-container ul {
  list-style: none;
  padding-left: 0;
}
.toc-container ul li {
  margin-bottom: 8px;
}
.toc-container ul a {
  text-decoration: none;
}
.toc-container ul a:hover {
  text-decoration: underline;
}
.toc-container ul ul {
  padding-left: 20px;
  margin-top: 8px;
}

/* Trending Posts Widget Style */
#PopularPosts2 .widget-title::before {
  content: "\\f3d1"; /* Bootstrap Icons flame icon */
  font-family: "bootstrap-icons";
  margin-right: 10px;
  color: $(link.color);
  font-style: normal;
}

/* Post Split Pagination Styles */
.post-pagination {
  margin-top: 30px;
  text-align: center;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.post-pagination .page-number {
  font-style: italic;
  color: #aaa;
}
.post-pagination .btn-split {
  background-color: $(link.color);
  color: #fff !important;
  padding: 8px 15px;
  border-radius: 4px;
  text-decoration: none;
  cursor: pointer;
  border: none;
}
.post-pagination .btn-split:hover {
  background-color: #333;
}
.post-pagination .btn-split[disabled] {
  background-color: #555;
  cursor: not-allowed;
  opacity: 0.6;
}

/* Custom Nav Styling for Simplified LinkList Logic */
.navbar-nav > li > a {
  padding: .5rem .5rem;
  color: var(--bs-nav-link-color, var(--bs-navbar-color));
  text-decoration: none;
  transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out;
}
.navbar-nav > li > a:hover {
  color: var(--bs-nav-link-hover-color, var(--bs-navbar-hover-color));
}
.dropdown-menu {
  /* Override dark theme for dropdown to match standard Bootstrap */
  background-color: #fff;
}
.dropdown-menu > li > a {
  display: block;
  width: 100%;
  padding: .25rem 1rem;
  clear: both;
  font-weight: 400;
  color: #212529;
  text-align: inherit;
  text-decoration: none;
  white-space: nowrap;
  background-color: transparent;
  border: 0;
}
.dropdown-menu > li > a:hover {
  background-color: #f8f9fa;
  color: #1e2125;
}


]]></b:skin>

<!-- This is required for the Blogger layout editor to work correctly. -->
<b:template-skin>
  <![CDATA[
    body#layout .section {
      margin: 0;
      padding: 10px;
      border: 1px dashed #ccc;
    }
    body#layout .section .widget {
      margin: 0;
      padding: 10px;
      border: 1px solid #f0f0f0;
    }
  ]]>
</b:template-skin>
</head>
<body>
<!-- Header and Navigation Bar -->
<header class="bg-light border-bottom">
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <!-- Blog Title -->
      <b:section class='header' id='header' maxwidgets='1' showaddelement='no'>
        <b:widget id='Header1' locked='true' title='Blog Title' type='Header' version='1'>
          <b:includable id='main'>
            <a class="navbar-brand" expr:href='data:blog.homepageUrl'>
              <data:title/>
            </a>
          </b:includable>
        </b:widget>
      </b:section>
      <!-- Mobile Navigation Toggle -->
      <button aria-controls='navbarNav' aria-expanded='false' aria-label='Toggle navigation' class='navbar-toggler' data-bs-target='#navbarNav' data-bs-toggle='collapse' type='button'>
        <span class='navbar-toggler-icon'></span>
      </button>
      <!-- Navigation Menu -->
      <div class='collapse navbar-collapse' id='navbarNav'>
        <b:section class='mx-auto' id='navbar' maxwidgets='1' showaddelement='yes'>
          <b:widget id='LinkList1' locked='false' title='Menu' type='LinkList' version='1'>
            <b:includable id='main'>
              <ul class='navbar-nav'>
                <b:loop values='data:links' var='link'>
                  <b:if cond='data:link.target == &quot;#sub-start&quot;'>
                    <li class='nav-item dropdown'>
                      <a class='nav-link dropdown-toggle' href='#' role='button' data-bs-toggle='dropdown' aria-expanded='false'>
                        <data:link.name/>
                      </a>
                      <ul class='dropdown-menu'>
                  <b:else if='data:link.target == &quot;#sub-end&quot;'/>
                      </ul>
                    </li>
                  <b:else/>
                    <li><a expr:href='data:link.target'><data:link.name/></a></li>
                  </b:if>
                </b:loop>
              </ul>
            </b:includable>
          </b:widget>
        </b:section>
        <b:section class='ms-auto' id='search' maxwidgets='1' showaddelement='yes'>
            <b:widget id='HTML100' locked='false' title='Search' type='HTML' version='1'>
                <b:includable id='main'>
                    <div class='d-flex align-items-center'>
                        <a class='nav-link' href='javascript:void(0);' id='search-button'>
                            <i class='bi bi-search'></i>
                        </a>
                    </div>
                    <div class='d-none' id='search-form-container'>
                        <form expr:action='data:blog.searchUrl' method='get' class='d-flex'>
                            <input class='form-control me-2' name='q' placeholder='Search...' type='text'/>
                            <button class='btn btn-outline-primary' type='submit'>Search</button>
                        </form>
                    </div>
                    <script>
                    // <![CDATA[
                        document.getElementById('search-button').addEventListener('click', function() {
                            var searchForm = document.getElementById('search-form-container');
                            searchForm.classList.toggle('d-none');
                        });
                    // ]]>
                    </script>
                </b:includable>
            </b:widget>
        </b:section>
      </div>
    </div>
  </nav>
</header>

<!-- Featured Post Section -->
<div class='container'>
  <b:section class='featured-post' id='featured-post' maxwidgets='1' showaddelement='yes'>
    <b:widget id='HTML3' locked='false' title='Featured Post' type='HTML' version='1'>
      <b:includable id='main'>
        <!-- Shortcode for featured post: {getPosts} $label={Label Name} -->
        <div id='featured-post-container' class='hero-post'>
          <data:content/>
        </div>
        <script>
        // <![CDATA[
          // --- Featured Post Script v2 ---
          // Fetches and displays a featured post based on a shortcode.
          // Shortcode: {getPosts} $label={Label Name}

          var featuredPostContainer = document.getElementById('featured-post-container');
          if (featuredPostContainer) {
            var shortcode = featuredPostContainer.innerText.trim();
            var labelMatch = shortcode.match(/\$label=\{([^}]+)\}/);
            var label = null;
            if (labelMatch && labelMatch[1]) {
                label = labelMatch[1];
            }

            var feedUrl;
            if (shortcode.includes('{getPosts}')) {
                if (label && label.toLowerCase() !== 'recent') {
                    feedUrl = '/feeds/posts/default/-/' + encodeURIComponent(label) + '?alt=json-in-script&max-results=1&callback=showFeaturedPost';
                } else {
                    // Default to recent post
                    feedUrl = '/feeds/posts/default?alt=json-in-script&max-results=1&callback=showFeaturedPost';
                }

                var script = document.createElement('script');
                script.src = feedUrl;
                document.body.appendChild(script);
            }
          }

          // Callback function to render the featured post.
          function showFeaturedPost(json) {
            if (!json.feed || !json.feed.entry || json.feed.entry.length === 0) {
                if (featuredPostContainer) featuredPostContainer.style.display = 'none';
                return;
            }

            var entry = json.feed.entry[0];
            var postTitle = entry.title.$t;

            var postUrl;
            for (var i = 0; i < entry.link.length; i++) {
                if (entry.link[i].rel == 'alternate') {
                    postUrl = entry.link[i].href;
                    break;
                }
            }

            if (!postUrl) return;

            var postSnippet = ("summary" in entry) ? entry.summary.$t.replace(/<[^>]*>/g, "").substring(0, 250) + '...' : "";
            var postImage = ("media$thumbnail" in entry) ? entry.media$thumbnail.url.replace('/s72-c/', '/s1600/') : "https://via.placeholder.com/800x400";

            var html = '<div class="card flex-md-row mb-4 shadow-sm h-md-250">';
            html += '<img data-src="' + postImage + '" class="card-img-left flex-auto d-none d-md-block lazyload" style="width: 50%; object-fit: cover;" alt="' + postTitle + '"/>';
            html += '<div class="card-body d-flex flex-column align-items-start">';
            html += '<h2 class="mb-0"><a class="text-light" href="' + postUrl + '">' + postTitle + '</a></h2>';
            html += '<div class="mb-1 text-muted">' + new Date(entry.published.$t).toLocaleDateString() + '</div>';
            html += '<p class="card-text mb-auto">' + postSnippet + '</p>';
            html += '<a class="stretched-link" href="' + postUrl + '">Continue reading</a>';
            html += '</div>';
            html += '</div>';

            if (featuredPostContainer) {
                featuredPostContainer.innerHTML = html;
                if (window.lazySizes) {
                    lazySizes.loader.checkElems();
                }
            }
          }
        // ]]>
        </script>
      </b:includable>
    </b:widget>
  </b:section>
</div>

<!-- Main Content Area -->
<!-- Check if the current page is an error page -->
<b:if cond='data:view.isError'>
  <!-- Display a 404 error message -->
  <div class='container my-4 text-center'>
    <h1 class='display-1'>404</h1>
    <h2>Page Not Found</h2>
    <p>Sorry, the page you are looking for does not exist.</p>
    <a class='btn btn-primary' expr:href='data:blog.homepageUrl'>Go to Homepage</a>
  </div>
<b:else/>
  <!-- Display the main content and sidebar -->
  <main class='container my-4'>
    <div class='row'>
      <!-- Blog Posts Column -->
      <div class='col-md-8'>
        <b:section class='main' id='main' showaddelement='yes'>
          <b:widget id='Blog1' locked='true' title='Blog Posts' type='Blog' version='2'>
            <b:includable id='main'>
              <b:if cond='data:view.isHomepage'>
                <b:include name='_showMainFeature'/>
                <b:include name='_showMinorFeatures'/>
              </b:if>

              <!-- Homepage and Archive Views -->
              <b:if cond='data:view.isMultipleItems'>
                <div class='row row-cols-1 row-cols-md-2 g-4' id='posts-container'>
                  <b:loop values='data:posts' var='post'>
                    <b:if cond='!data:post.labels any (l => l.name in {&quot;FeatureMain&quot;, &quot;FeatureMinor1&quot;, &quot;FeatureMinor2&quot;})'>
                      <div class='col'>
                          <b:include data='post' name='post-card'/>
                      </div>
                    </b:if>
                  </b:loop>
                </div>
                <div class='text-center mt-4' id='load-more-container'>
                  <b:if cond='data:posts.nextPageUrl'>
                    <a class='btn btn-primary' expr:href='data:posts.nextPageUrl' id='load-more-button'>Load More Posts</a>
                  </b:if>
                </div>
              <b:else if='data:view.isItem'/>
                <!-- Single Item View -->
                <b:loop values='data:posts' var='post'>
                  <b:include data='post' name='item-post'/>
                </b:loop>
              </b:if>
              <b:if cond='!data:view.isHomepage'>
                <b:include name='nextprev'/>
              </b:if>
            </b:includable>

            <b:includable id='_showMainFeature' var='post'>
              <b:loop values='data:posts' var='post' index='i'>
                <b:if cond='data:post.labels any (l => l.name == &quot;FeatureMain&quot;)'>
                  <div class='p-4 p-md-5 mb-4 text-white rounded bg-dark feature-jumbotron' expr:style='&quot;background-image: url(\&quot;&quot; + data:post.firstImageUrl + &quot;\&quot;);&quot;'>
                    <div class='col-md-6 px-0'>
                      <h1 class='display-4 fst-italic'><data:post.title/></h1>
                      <p class='lead my-3'><b:eval expr='data:post.snippets.long ? data:post.snippets.long : &quot;&quot;'/></p>
                      <p class='lead mb-0'><a expr:href='data:post.url' class='text-white fw-bold'>Continue reading...</a></p>
                    </div>
                  </div>
                </b:if>
              </b:loop>
            </b:includable>

            <b:includable id='_showMinorFeatures'>
              <div class='row mb-2'>
                <b:loop values='data:posts' var='post'>
                  <b:if cond='data:post.labels any (l => l.name in {&quot;FeatureMinor1&quot;, &quot;FeatureMinor2&quot;})'>
                    <div class='col-md-6'>
                      <div class='card flex-md-row mb-4 shadow-sm h-md-250'>
                        <div class='card-body d-flex flex-column align-items-start'>
                          <strong class='d-inline-block mb-2 text-primary'>
                            <b:loop values='data:post.labels where (l => l.name not in {&quot;FeatureMain&quot;, &quot;FeatureMinor1&quot;, &quot;FeatureMinor2&quot;})' var='label' index='i'>
                              <b:if cond='data:i == 0'><data:label.name/></b:if>
                            </b:loop>
                          </strong>
                          <h3 class='mb-0'>
                            <a class='text-light' expr:href='data:post.url'><data:post.title/></a>
                          </h3>
                          <div class='mb-1 text-muted'><data:post.timestamp/></div>
                          <p class='card-text mb-auto'><b:eval expr='data:post.snippets.long ? data:post.snippets.long : &quot;&quot;'/></p>
                          <a expr:href='data:post.url'>Continue reading</a>
                        </div>
                        <b:if cond='data:post.firstImageUrl'>
                          <img class='card-img-right flex-auto d-none d-md-block' expr:src='data:post.firstImageUrl' style='width: 200px; height: 250px; object-fit: cover;'/>
                        </b:if>
                      </div>
                    </div>
                  </b:if>
                </b:loop>
              </div>
            </b:includable>

            <b:includable id='post-card' var='post'>
              <div class='card h-100'>
                <a expr:href='data:post.url'>
                    <b:if cond='data:post.firstImageUrl'>
                        <img class='card-img-top lazyload' expr:data-src='data:post.firstImageUrl' alt='...'/>
                    <b:else/>
                        <img class='card-img-top lazyload' data-src='https://via.placeholder.com/700x350' alt='...'/>
                    </b:if>
                </a>
                <div class='card-body'>
                  <h2 class='card-title h5'><a expr:href='data:post.url'><data:post.title/></a></h2>
                  <p class='card-text text-muted fs-sm'>
                    <span class='me-2'><i class='bi bi-person'/> <data:post.author/></span>
                    <span class='me-2'><i class='bi bi-calendar'/> <data:post.timestamp/></span>
                  </p>
                  <p class='card-text'><b:eval expr='data:post.snippets.long ? data:post.snippets.long : data:post.body snippet { length: 150, links: false, linebreaks: true }'/></p>
                </div>
                <div class='card-footer'>
                    <a class='btn btn-primary btn-sm' expr:href='data:post.url'>Read More</a>
                </div>
              </div>
            </b:includable>

            <b:includable id='item-post' var='post'>
              <div class="post-header mb-4">
                <h1 class="post-title"><data:post.title/></h1>
                <p class='card-text text-muted fs-sm'>
                  <span class='me-2'><i class='bi bi-person'/> <data:post.author/></span>
                  <span class='me-2'><i class='bi bi-calendar'/> <data:post.timestamp/></span>
                </p>
              </div>
              <div class="post-content-container mb-4">
                <data:post.body/>
              </div>
              <!-- Author Box, Related Posts, Comments will go here -->
            </b:includable>
          </b:widget>
        </b:section>
      </div>
      <!-- Sidebar Column -->
      <div class='col-md-4'>
        <b:section class='sidebar' id='sidebar' showaddelement='yes'>
          <!-- Search Widget -->
          <b:widget id='HTML2' locked='false' title='Search' type='HTML' version='1'>
            <b:includable id='main'>
              <div class='widget'>
                <h4 class='widget-title'><data:title/></h4>
                <div class='widget-content'>
                  <form expr:action='data:blog.searchUrl' method='get'>
                    <div class='input-group'>
                      <input class='form-control' name='q' placeholder='Search...' type='text'/>
                      <button class='btn btn-outline-secondary' type='submit'><i class='bi bi-search'/></button>
                    </div>
                  </form>
                </div>
              </div>
            </b:includable>
          </b:widget>
          <!-- Recent Posts Widget -->
          <b:widget id='HTML4' locked='false' title='Recent Posts' type='HTML' version='1'>
            <b:includable id='main'>
              <div class='widget'>
                <h4 class='widget-title'><data:title/></h4>
                <div class='widget-content'>
                  <div id='recent-posts-container'></div>
                  <script>
                  // <![CDATA[
                    // --- Recent Posts Script ---
                    // Fetches and displays the 5 most recent posts.

                    var recentPostsContainer = document.getElementById('recent-posts-container');
                    if (recentPostsContainer) {
                        var url = '/feeds/posts/default?alt=json-in-script&max-results=5&callback=showRecentPostsWidget';
                        var script = document.createElement('script');
                        script.src = url;
                        document.body.appendChild(script);
                    }

                    // Callback function to render the recent posts.
                    function showRecentPostsWidget(json) {
                      if (!recentPostsContainer) return;
                      for (var i = 0; i < json.feed.entry.length; i++) {
                        var entry = json.feed.entry[i];
                        var postUrl;
                        for (var j = 0; j < entry.link.length; j++) {
                          if (entry.link[j].rel == 'alternate') {
                            postUrl = entry.link[j].href;
                            break;
                          }
                        }
                        var postTitle = entry.title.$t;
                        var postSnippet = ("summary" in entry) ? entry.summary.$t.replace(/<[^>]*>/g, "").substring(0, 100) + '...' : "";
                        var postImage = ("media$thumbnail" in entry) ? entry.media$thumbnail.url : "https://via.placeholder.com/150";

                        var html = '<div class="d-flex mb-3">';
                        html += '<div class="flex-shrink-0">';
                        html += '<img data-src="' + postImage + '" class="lazyload" style="width: 80px; height: 80px; object-fit: cover;" alt="' + postTitle + '"/>';
                        html += '</div>';
                        html += '<div class="flex-grow-1 ms-3">';
                        html += '<h5><a href="' + postUrl + '">' + postTitle + '</a></h5>';
                        html += '<p>' + postSnippet + '</p>';
                        html += '</div>';
                        html += '</div>';
                        recentPostsContainer.innerHTML += html;
                      }
                    }
                  // ]]>
                  </script>
                </div>
              </div>
            </b:includable>
          </b:widget>
          <!-- Trending Posts Widget -->
          <b:widget id='HTML6' locked='false' title='Trending Posts' type='HTML' version='1'>
            <b:includable id='main'>
              <div class='widget'>
                <h4 class='widget-title'><data:title/></h4>
                <div class='widget-content'>
                  <ul class='list-unstyled' id='trending-posts-container'/>
                  <script>
                  // <![CDATA[
                    function showTrendingPosts(json) {
                      var posts = json.feed.entry;
                      if (!posts) { return; }
                      posts.sort(function(a, b) {
                        var countA = a.thr$total ? parseInt(a.thr$total.$t, 10) : 0;
                        var countB = b.thr$total ? parseInt(b.thr$total.$t, 10) : 0;
                        return countB - countA;
                      });

                      var container = document.getElementById('trending-posts-container');
                      var maxPosts = 5;
                      for (var i = 0; i < posts.length && i < maxPosts; i++) {
                        var entry = posts[i];
                        var postTitle = entry.title.$t;
                        var postUrl;
                        for (var j = 0; j < entry.link.length; j++) {
                          if (entry.link[j].rel == 'alternate') {
                            postUrl = entry.link[j].href;
                            break;
                          }
                        }
                        if (postUrl) {
                          var listItem = document.createElement('li');
                          listItem.innerHTML = '<a href="' + postUrl + '">' + postTitle + '</a>';
                          container.appendChild(listItem);
                        }
                      }
                    }
                    var script = document.createElement('script');
                    script.src = '/feeds/posts/default?alt=json-in-script&max-results=150&callback=showTrendingPosts';
                    document.body.appendChild(script);
                  // ]]>
                  </script>
                </div>
              </div>
            </b:includable>
          </b:widget>
          <!-- Popular Posts Widget -->
          <b:widget id='PopularPosts1' locked='false' type='PopularPosts' version='1'/>
          <!-- Archive Widget -->
          <b:widget id='BlogArchive1' locked='false' type='BlogArchive' version='1'/>
          <!-- Advertisement Widget -->
          <b:widget id='HTML5' locked='false' title='Advertisement' type='HTML' version='1'>
            <b:includable id='main'>
              <div class='widget'>
                <h4 class='widget-title'><data:title/></h4>
                <div class='widget-content'>
                  <div class='lazy-ad' style='width: 300px; height: 250px;'>
                    <!-- Ad will be loaded here -->
                  </div>
                </div>
              </div>
            </b:includable>
          </b:widget>
        </b:section>
      </div>
    </div>
  </main>
</b:if>

<!-- Footer -->
<footer class="bg-dark text-light mt-auto pt-5">
  <div class="container">
    <div class="row">
      <!-- Footer Column 1 -->
      <div class="col-md-4">
        <b:section class='footer-col-1' id='footer-col-1' showaddelement='yes'>
          <b:widget id='HTML20' locked='false' title='About Us' type='HTML' version='1'>
            <b:includable id='main'>
              <h5 class="text-uppercase"><data:title/></h5>
              <p><data:content/></p>
            </b:includable>
          </b:widget>
        </b:section>
      </div>
      <!-- Footer Column 2 -->
      <div class="col-md-4">
        <b:section class='footer-col-2' id='footer-col-2' showaddelement='yes'>
          <b:widget id='LinkList20' locked='false' title='Categories' type='LinkList' version='1'>
            <b:includable id='main'>
              <h5 class="text-uppercase"><data:title/></h5>
              <ul class="list-unstyled">
                <b:loop values='data:links' var='link'>
                  <li><a expr:href='data:link.target' class="text-light"><data:link.name/></a></li>
                </b:loop>
              </ul>
            </b:includable>
          </b:widget>
        </b:section>
      </div>
      <!-- Footer Column 3 -->
      <div class="col-md-4">
        <b:section class='footer-col-3' id='footer-col-3' showaddelement='yes'>
          <b:widget id='HTML21' locked='false' title='Follow Us' type='HTML' version='1'>
            <b:includable id='main'>
              <h5 class="text-uppercase"><data:title/></h5>
              <!-- Social media icons will be rendered here -->
              <data:content/>
            </b:includable>
          </b:widget>
        </b:section>
      </div>
    </div>
  </div>
  <!-- Socket Area -->
  <div class="bg-black py-3 mt-4">
    <div class="container text-center">
      <b:section class='footer-socket' id='footer-socket' maxwidgets='1' showaddelement='no'>
        <b:widget id='Attribution1' locked='true' title='' type='Attribution' version='1'/>
      </b:section>
      <p class="mb-0">Designed by <a href="https://www.sorabloggingtips.com/" target="_blank">Sora Blogging Tips</a></p>
    </div>
  </div>
</footer>

<!-- Bootstrap JS -->
<script src='https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js'/>

<!-- Theme-specific Scripts -->

<!-- Default Markups for Blogger Widgets -->
<b:defaultmarkups>
  <b:defaultmarkup type='PopularPosts'>
    <b:includable id='main'>
      <div class='widget'>
        <h4 class='widget-title'><data:title/></h4>
        <div class='widget-content'>
          <ul class="list-unstyled">
          <b:loop values='data:posts' var='post'>
            <li><a expr:href='data:post.url'><data:post.title/></a></li>
          </b:loop>
          </ul>
        </div>
      </div>
    </b:includable>
  </b:defaultmarkup>
  <b:defaultmarkup type='BlogArchive'>
    <b:includable id='main'>
      <div class='widget'>
        <h4 class='widget-title'><data:title/></h4>
        <div class='widget-content'>
          <b:include name='content'/>
        </div>
      </div>
    </b:includable>
  </b:defaultmarkup>
</b:defaultmarkups>

<script>
// <![CDATA[
  // --- Lazy Loading for Ads Script ---
  // Uses IntersectionObserver to load ads when they enter the viewport.

  document.addEventListener("DOMContentLoaded", function() {
    var lazyAds = [].slice.call(document.querySelectorAll(".lazy-ad"));

    if ("IntersectionObserver" in window) {
      let lazyAdObserver = new IntersectionObserver(function(entries, observer) {
        entries.forEach(function(entry) {
          if (entry.isIntersecting) {
            let lazyAd = entry.target;
            // Replace with your actual ad code
            lazyAd.innerHTML = '<img src="https://via.placeholder.com/300x250.png?text=Advertisement" alt="Advertisement" />';
            // Stop observing the ad once it has been loaded.
            lazyAdObserver.unobserve(lazyAd);
          }
        });
      });

      lazyAds.forEach(function(lazyAd) {
        lazyAdObserver.observe(lazyAd);
      });
    }
  });
// ]]>
</script>

<script>
// <![CDATA[
// --- Load More Posts Script ---
document.addEventListener('DOMContentLoaded', function() {
    var loadMoreButton = document.getElementById('load-more-button');
    if (!loadMoreButton) {
        return;
    }
    var postsContainer = document.getElementById('posts-container');
    var loadMoreContainer = document.getElementById('load-more-container');
    var nextPageUrl = loadMoreButton.href;
    loadMoreButton.addEventListener('click', function(e) {
        e.preventDefault();
        if (!nextPageUrl) {
            loadMoreContainer.style.display = 'none';
            return;
        }
        loadMoreButton.innerText = 'Loading...';
        loadMoreButton.disabled = true;
        fetch(nextPageUrl)
            .then(function(response) { return response.text(); })
            .then(function(text) {
                var parser = new DOMParser();
                var htmlDocument = parser.parseFromString(text, 'text/html');
                var newPosts = htmlDocument.querySelectorAll('#posts-container .col');
                var newLoadMoreContainer = htmlDocument.getElementById('load-more-container');
                if (newPosts.length > 0) {
                    newPosts.forEach(function(post) {
                        postsContainer.appendChild(post);
                    });
                }
                if (newLoadMoreContainer) {
                    var newLoadMoreLink = newLoadMoreContainer.querySelector('a');
                    if (newLoadMoreLink) {
                        nextPageUrl = newLoadMoreLink.href;
                        loadMoreButton.innerText = 'Load More Posts';
                        loadMoreButton.disabled = false;
                    } else {
                        loadMoreContainer.style.display = 'none';
                    }
                } else {
                    loadMoreContainer.style.display = 'none';
                }
            })
            .catch(function(error) {
                console.error('Error loading more posts:', error);
                loadMoreButton.innerText = 'Error. Try Again.';
                loadMoreButton.disabled = false;
            });
    });
});

// --- Post Content Processor Script ---
document.addEventListener('DOMContentLoaded', function() {
    var postContent = document.querySelector('.post-content-container');
    if (!postContent) { return; }

    // --- Processor 1: Button and Alert Shortcodes ---
    var tempHtml = postContent.innerHTML;
    var iconMap = {
        preview: 'bi-eye', download: 'bi-download', link: 'bi-link-45deg', cart: 'bi-cart',
        share: 'bi-share', contact: 'bi-envelope', info: 'bi-info-circle',
        paypal: 'bi-paypal', whatsapp: 'bi-whatsapp', gift: 'bi-gift'
    };
    var newHtml = tempHtml.replace(/{getButton}(.*?)}/g, function(match, args) {
        var text = (args.match(/\$text=\{([^}]+)\}/) || [])[1] || 'Button';
        var icon = (args.match(/\$icon=\{([^}]+)\}/) || [])[1] || '';
        var color = (args.match(/\$color=\{([^}]+)\}/) || [])[1] || '';
        var link = (args.match(/\$link=\{([^}]+)\}/) || [])[1] || '#';
        var iconHtml = icon && iconMap[icon] ? '<i class="bi ' + iconMap[icon] + '"></i>' : '';
        var style = color ? 'style="background-color:' + color + '"' : '';
        return '<a href="' + link + '" class="sc-button" ' + style + '>' + iconHtml + text + '</a>';
    });
    if (tempHtml !== newHtml) {
      postContent.innerHTML = newHtml;
    }
    var blockquotes = postContent.querySelectorAll('blockquote');
    blockquotes.forEach(function(bq) {
        var text = bq.innerText.trim();
        var alertTypes = ['alertSuccess', 'alertInfo', 'alertWarning', 'alertError'];
        for (var i = 0; i < alertTypes.length; i++) {
            var shortcode = '{' + alertTypes[i] + '}';
            if (text.startsWith(shortcode)) {
                bq.innerHTML = bq.innerHTML.replace(shortcode, '');
                var alertClass = 'sc-' + alertTypes[i].replace('A', '-a');
                bq.classList.add('sc-alert', alertClass);
                break;
            }
        }
    });

    // --- Processor 2: TOC Generator ---
    var tocContainer = document.getElementById('toc-container');
    if (tocContainer) {
        var headings = postContent.querySelectorAll('h2, h3');
        if (headings.length > 1) {
            var tocList = document.createElement('ul');
            var tocTitle = document.createElement('div');
            tocTitle.className = 'toc-title';
            tocTitle.innerText = 'Table of Contents';
            tocContainer.appendChild(tocTitle);
            var currentH2ListItem = null;
            headings.forEach(function(heading, index) {
                var level = parseInt(heading.tagName.substring(1), 10);
                var id = 'toc-' + index;
                heading.setAttribute('id', id);
                var listItem = document.createElement('li');
                var link = document.createElement('a');
                link.setAttribute('href', '#' + id);
                link.innerText = heading.innerText;
                listItem.appendChild(link);
                if (level === 2) {
                    tocList.appendChild(listItem);
                    currentH2ListItem = listItem;
                } else if (level === 3 && currentH2ListItem) {
                    var sublist = currentH2ListItem.querySelector('ul');
                    if (!sublist) {
                        sublist = document.createElement('ul');
                        currentH2ListItem.appendChild(sublist);
                    }
                    sublist.appendChild(listItem);
                } else {
                    tocList.appendChild(listItem);
                }
            });
            tocContainer.appendChild(tocList);
        }
    }

    // --- Processor 3: Post Splitter ---
    var splitMarker = '<!-- split -->';
    if (postContent.innerHTML.includes(splitMarker)) {
        var pages = postContent.innerHTML.split(splitMarker);
        var currentPage = 0;
        var paginationContainer = document.createElement('div');
        paginationContainer.className = 'post-pagination';
        postContent.parentNode.insertBefore(paginationContainer, postContent.nextSibling);

        function updatePage() {
            postContent.innerHTML = pages[currentPage];
            var pageNum = currentPage + 1;
            var totalPages = pages.length;
            paginationContainer.innerHTML = '<button class="btn-split" id="prev-page" ' + (currentPage === 0 ? 'disabled' : '') + '>Previous</button>' +
                                          '<span class="page-number">Page ' + pageNum + ' of ' + totalPages + '</span>' +
                                          '<button class="btn-split" id="next-page" ' + (currentPage === totalPages - 1 ? 'disabled' : '') + '>Next</button>';
            document.getElementById('prev-page').addEventListener('click', function() {
                if (currentPage > 0) { currentPage--; updatePage(); postContent.scrollIntoView({ behavior: 'smooth' }); }
            });
            document.getElementById('next-page').addEventListener('click', function() {
                if (currentPage < pages.length - 1) { currentPage++; updatePage(); postContent.scrollIntoView({ behavior: 'smooth' }); }
            });
        }
        updatePage();
    }
});
// ]]>
</script>
</body>
</html>
